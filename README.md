# Task Management API

HTTP API для управления I/O bound задачами с продолжительным временем выполнения (3-5 минут). Сервис позволяет создавать задачи, отслеживать их статус и удалять их. Все данные хранятся в памяти сервиса.

## Особенности

- **Асинхронное выполнение** задач в горутинах
- **Безопасная работа** с общими данными через мьютексы
- **Отслеживание продолжительности** выполнения задач
- **Хранение в памяти** без внешних зависимостей
- **RESTful API** для управления задачами

## Запуск

### Установка и запуск

1. Клонируйте репозиторий:
```bash
git clone https://github.com/Headliner38/ioBound
cd ioBound
```

2. Запустите сервер:
```bash
go run main.go
```

Сервер запустится на **http://localhost:8080**

## API Endpoints

### 1. Создание задачи
**POST** `http://localhost:8080/api/tasks/create`

Создаёт новую задачу и возвращает её уникальный ID. Тело запроса не требуется.

**Ответ:**
```json
{
    "id": "task_id"
}
```

### 2. Получение статуса задачи
**GET** `http://localhost:8080/api/tasks/get?id={task_id}`

Возвращает текущий статус задачи, время создания, время начала/окончания и продолжительность выполнения.

**Ответ:**
```json
{
    "id": "dd9a5b29-b1a3-4083-ac86-68f251896958",
    "status": "completed",
    "created_at": "2025-07-06T17:30:05.949653+03:00",
    "started_at": "2025-07-06T17:30:20.95007+03:00",
    "finished_at": "2025-07-06T17:33:20.950811+03:00",
    "duration": "3m0.001074292s"
}
```

**Возможные статусы:**
- `pending` - задача создана, но ещё не начала выполняться
- `running` - задача выполняется
- `completed` - задача успешно завершена
- `failed` - задача завершилась с ошибкой

### 3. Удаление задачи
**DELETE** `http://localhost:8080/api/tasks/delete?id={task_id}`

Удаляет задачу из памяти.

**Успешный ответ:**
```json
{
    "OK:": "deleted task with id {task_od}"
}
```

## Примеры использования

### Создание задачи
```bash
curl -X POST http://localhost:8080/api/tasks/create
```

### Получение статуса
```bash
curl "http://localhost:8080/api/tasks/get?id=dd9a5b29-b1a3-4083-ac86-68f251896958"
```

### Удаление задачи
```bash
curl -X DELETE "http://localhost:8080/api/tasks/delete?id=dd9a5b29-b1a3-4083-ac86-68f251896958"
```

## Жизненный цикл задачи

1. **Создание** → Статус: `pending`
2. **Запуск** → Статус: `running` (время начала записывается)
3. **Выполнение** → Задача выполняется 3 минуты
4. **Завершение** → Статус: `completed` (время окончания записывается)


## Технические детали

- **Время выполнения**: 3 минуты (имитация I/O bound операции)
- **Хранение**: В памяти процесса (map[string]*Task)
- **Потокобезопасность**: Обеспечена через sync.RWMutex
- **ID задач**: UUID для уникальности

## Обработка ошибок

- **400 Bad Request** - отсутствует ID задачи
- **404 Not Found** - задача не найдена
- **200 OK** - успешное выполнение операции